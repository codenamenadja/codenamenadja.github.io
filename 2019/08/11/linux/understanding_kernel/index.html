<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>커널의 이해와 시스템 콜 이해 | Junehan&#39;s workbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Index   개요 사용자 모드로 구현되는 기능    개요  OS의 구성, 커널,사용자 모드    타입 정의     커널모드 OS의 인터페이스로 내부 장치에 대한 Wrapper manager   사용자모드 OS의 인터페이스를 사용하는 외부 프로세스     커널프로세스의 고유한 역할    title 설명     디바이스 드라이버 관리 외부 프로세스가 디바이">
<meta name="keywords" content="linux">
<meta property="og:type" content="article">
<meta property="og:title" content="커널의 이해와 시스템 콜 이해">
<meta property="og:url" content="https://codenamenadja.github.io/2019/08/11/linux/understanding_kernel/index.html">
<meta property="og:site_name" content="Junehan&#39;s workbook">
<meta property="og:description" content="Index   개요 사용자 모드로 구현되는 기능    개요  OS의 구성, 커널,사용자 모드    타입 정의     커널모드 OS의 인터페이스로 내부 장치에 대한 Wrapper manager   사용자모드 OS의 인터페이스를 사용하는 외부 프로세스     커널프로세스의 고유한 역할    title 설명     디바이스 드라이버 관리 외부 프로세스가 디바이">
<meta property="og:locale" content="ko">
<meta property="og:updated_time" content="2021-01-25T08:36:06.079Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="커널의 이해와 시스템 콜 이해">
<meta name="twitter:description" content="Index   개요 사용자 모드로 구현되는 기능    개요  OS의 구성, 커널,사용자 모드    타입 정의     커널모드 OS의 인터페이스로 내부 장치에 대한 Wrapper manager   사용자모드 OS의 인터페이스를 사용하는 외부 프로세스     커널프로세스의 고유한 역할    title 설명     디바이스 드라이버 관리 외부 프로세스가 디바이">
  
    <link rel="alternate" href="/atom.xml" title="Junehan&#39;s workbook" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Junehan&#39;s workbook</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">work flow and descriptions</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="검색"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://codenamenadja.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-linux/understanding_kernel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/11/linux/understanding_kernel/" class="article-date">
  <time datetime="2019-08-11T08:35:49.000Z" itemprop="datePublished">2019-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      커널의 이해와 시스템 콜 이해
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="index"><a class="markdownIt-Anchor" href="#index"></a> Index</h2>
<hr>
<ol>
<li><a href="#%EA%B0%9C%EC%9A%94"><strong>개요</strong></a></li>
<li><a href="#%EC%82%AC%EC%9A%A9%EC%9E%90_%EB%AA%A8%EB%93%9C%EB%A1%9C_%EA%B5%AC%ED%98%84%EB%90%98%EB%8A%94_%EA%B8%B0%EB%8A%A5"><strong>사용자 모드로 구현되는 기능</strong></a></li>
</ol>
<hr>
<h2 id="개요"><a class="markdownIt-Anchor" href="#개요"></a> 개요</h2>
<h3 id="os의-구성-커널사용자-모드"><a class="markdownIt-Anchor" href="#os의-구성-커널사용자-모드"></a> OS의 구성, 커널,사용자 모드</h3>
<table>
<thead>
<tr>
<th style="text-align:left">타입</th>
<th style="text-align:center">정의</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">커널모드</td>
<td style="text-align:center">OS의 인터페이스로 내부 장치에 대한 Wrapper manager</td>
</tr>
<tr>
<td style="text-align:left">사용자모드</td>
<td style="text-align:center">OS의 인터페이스를 사용하는 외부 프로세스</td>
</tr>
</tbody>
</table>
<h3 id="커널프로세스의-고유한-역할"><a class="markdownIt-Anchor" href="#커널프로세스의-고유한-역할"></a> 커널프로세스의 고유한 역할</h3>
<table>
<thead>
<tr>
<th style="text-align:left">title</th>
<th style="text-align:center">설명</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">디바이스 드라이버 관리</td>
<td style="text-align:center">외부 프로세스가 디바이스에 대한 동시접근을 제한, 종류가 같은 디바이스는 동일 인터페이스로 조작</td>
</tr>
<tr>
<td style="text-align:left">프로세스 관리 시스템</td>
<td style="text-align:center">프로세스의 상태를 관리하고, 그에 따른 상태를 조정 및 관리 (OnProcessing, , kill)</td>
</tr>
<tr>
<td style="text-align:left">프로세스 스케줄링</td>
<td style="text-align:center">프로세스당 CPU 리소스 사용 시간 부여</td>
</tr>
<tr>
<td style="text-align:left">메모리 관리 시스템</td>
<td style="text-align:center">프로세스당 메모리(물리메모리, 가상메모리) 부여</td>
</tr>
</tbody>
</table>
<p>프로세스의 동작과 OS의 역할이라 함은, 다양한 데이터가 메모리를 중심으로</p>
<pre><code>1. CPU의 레지스터
2. L1,L2 Cache
3. 메모리
4. 저장장치
</code></pre>
<p>와 같은 저장장치의 계층 구조를 통해 프로세스를 빠르고 안정적으로 동작시킨다.<br>
저장장치에 보관된 데이터는 디바이스 드라이버에 요청하여 접근 할 수 있지만,<br>
좀 더 간단히 접근하기 위해, <strong>파일 시스템</strong>이라하는 프로그램을 통해 접근한다.</p>
<pre><code>1. 프로세스(사용자 모드)
2. 파일시스템(커널모드)
3. 저장장치 드라이버
4. 저장장치
</code></pre>
<p><strong>시스템 또한 최우선의 관리자로서 작동하려면 저장장치로 부터 OS를 읽어야 한다.</strong></p>
<blockquote>
<p>정확하게는 OS를 읽어들이기 전에 <strong>BIOS</strong>, <strong>UEFI</strong>라 하는 하드웨어 임베디드 소프트웨어가 작동하여</p>
<ol>
<li>하드웨어의 초기와 처리</li>
<li>동작할 OS를 선택하는 부트로더</li>
</ol>
<p>가 동작합니다.</p>
</blockquote>
<hr>
<h2 id="사용자_모드로_구현되는_기능"><a class="markdownIt-Anchor" href="#사용자_모드로_구현되는_기능"></a> 사용자_모드로_구현되는_기능</h2>
<ul>
<li>다룰 내용
<ol>
<li>시스템 콜</li>
<li>OS가 제공하는 라이브러리</li>
<li>OS가 제공하는 프로그램</li>
</ol>
</li>
</ul>
<h3 id="시스템-콜의-종류"><a class="markdownIt-Anchor" href="#시스템-콜의-종류"></a> 시스템 콜의 종류</h3>
<pre><code>1. 프로세스 생성, 삭제
2. 메모리 확보, 해제
3. 프로세스간 통신(IPC)
4. 네트워크
5. 파일시스템 다루기
6. 파일 다루기(디바이스 접근)
</code></pre>
<h3 id="cpu의-모드-변경"><a class="markdownIt-Anchor" href="#cpu의-모드-변경"></a> CPU의 모드 변경</h3>
<ol>
<li>프로세스가 사용자 모드로 사용되는 와중에 커널에 처리를 요청하고자 시스템 콜을<br>
호출하면 <strong>CPU인터럽트 발생</strong></li>
<li>CPU가 사용자 모드에서 커널모드로 변경</li>
<li>요청내용 처리</li>
<li>시스템 콜 처리 종료</li>
<li>저장해놨던 CODE segment에 대한 정보를 이어가, IR에 담음</li>
<li>사용자 모드로 전환 프로세스 동작 <strong>이어감</strong></li>
</ol>
<h3 id="시스템-콜-호출의-동작-순서"><a class="markdownIt-Anchor" href="#시스템-콜-호출의-동작-순서"></a> 시스템 콜 호출의 동작 순서</h3>
<pre><code><figure class="highlight c"><figcaption><span>hello.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"hello world"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><figcaption><span>bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strace -o hello.log ./hello</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><figcaption><span>bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat hello.log</span><br><span class="line">execve(<span class="string">"/hello"</span>, [<span class="string">"./hello"</span>], [/* 77 vars */]) = 0</span><br><span class="line">brk(NULL)                               = 0x5619fe7aa000</span><br><span class="line">access(<span class="string">"/etc/ld.so.nohwcap"</span>, F_OK)      = -1 ENOENT (No such file or directory)</span><br><span class="line">access(<span class="string">"/etc/ld.so.preload"</span>, R_OK)      = -1 ENOENT (No such file or </span><br><span class="line">directory)</span><br><span class="line">...</span><br><span class="line">close(3)                                = 0</span><br><span class="line">write(1, <span class="string">"hello world\n"</span>, 12)           = 12</span><br><span class="line">exit_group(0)                           = ?</span><br></pre></td></tr></table></figure>
</code></pre>
<hr>
<pre><code><figure class="highlight python"><figcaption><span>hello.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><figcaption><span>bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strace -o hello.py.log python3 ./hello.py</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><figcaption><span>bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cat hello.py.log</span><br><span class="line">execve(<span class="string">"/home/junehan/miniconda3/bin/python3"</span>, [<span class="string">"python3"</span>, <span class="string">"hello.py"</span>], 0x7fff882f0768 /* 77 vars */) = 0</span><br><span class="line">brk(NULL)                               = 0x5619fe7aa000</span><br><span class="line">access(<span class="string">"/etc/ld.so.nohwcap"</span>, F_OK)      = -1 ENOENT (No such file or directory)</span><br><span class="line">readlink(<span class="string">"/proc/self/exe"</span>, <span class="string">"/home/junehan/miniconda3/bin/pyt"</span>..., 4096) = 38</span><br><span class="line">access(<span class="string">"/etc/ld.so.preload"</span>, R_OK)      = -1 ENOENT (No such file or </span><br><span class="line">directory)</span><br><span class="line">...</span><br><span class="line">close(3)                                = 0</span><br><span class="line">write(1, <span class="string">"hello world\n"</span>, 12)           = 12 <span class="comment"># write system call</span></span><br><span class="line">rt_sigaction(SIGINT, &#123;sa_handler=SIG_DFL, sa_mask=[], sa_flags=SA_RESTORER, sa_restorer=0x7f8b453db890&#125;, &#123;sa_handler=0x5619fd4904d0, sa_mask=[], sa_flags=SA_RESTORER, sa_restorer=0x7f8b453db890&#125;, 8) = 0</span><br><span class="line">sigaltstack(NULL, &#123;ss_sp=0x5619fe7ca720, ss_flags=0, ss_size=8192&#125;) = 0</span><br><span class="line">sigaltstack(&#123;ss_sp=NULL, ss_flags=SS_DISABLE, ss_size=0&#125;, NULL) = 0</span><br><span class="line">munmap(0x7f8b4564c000, 262144)          = 0</span><br><span class="line">brk(0x5619fe842000)                     = 0x5619fe842000</span><br><span class="line">exit_group(0)                           = ?</span><br><span class="line"><span class="comment"># 705개의 시스템 콜 호출</span></span><br></pre></td></tr></table></figure>
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://codenamenadja.github.io/2019/08/11/linux/understanding_kernel/" data-id="ckkdb52fh000a1pqkefbi5zmi" class="article-share-link">공유</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/12/linux/basic_concept/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">최신</strong>
      <div class="article-nav-title">
        
          basic concept of linux / about file
        
      </div>
    </a>
  
  
    <a href="/2019/08/09/python/custom_module/error_handler/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">이전</strong>
      <div class="article-nav-title">에러처리 Decorator과 logging, write to csv</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">태그</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/custom-module/">custom module</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabric/">fabric</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/functional-programming/">functional programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo-deploy/">hexo-deploy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pipenv/">pipenv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project/">project</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-module/">python module</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-post/">python post</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/">sql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/travel-note/">travel_note</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tutorial/">tutorial</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">태그 클라우드</h3>
    <div class="widget tagcloud">
      <a href="/tags/c/" style="font-size: 11.43px;">c</a> <a href="/tags/custom-module/" style="font-size: 12.86px;">custom module</a> <a href="/tags/django/" style="font-size: 14.29px;">django</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/fabric/" style="font-size: 10px;">fabric</a> <a href="/tags/functional-programming/" style="font-size: 11.43px;">functional programming</a> <a href="/tags/hexo-deploy/" style="font-size: 10px;">hexo-deploy</a> <a href="/tags/http/" style="font-size: 11.43px;">http</a> <a href="/tags/linux/" style="font-size: 15.71px;">linux</a> <a href="/tags/network/" style="font-size: 11.43px;">network</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/pipenv/" style="font-size: 10px;">pipenv</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/project/" style="font-size: 10px;">project</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/python-module/" style="font-size: 17.14px;">python module</a> <a href="/tags/python-post/" style="font-size: 18.57px;">python post</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/testing/" style="font-size: 10px;">testing</a> <a href="/tags/travel-note/" style="font-size: 10px;">travel_note</a> <a href="/tags/tutorial/" style="font-size: 10px;">tutorial</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">아카이브</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">1월 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">9월 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">8월 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">7월 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">6월 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">5월 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">최근 포스트</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/26/fastcamp/my_post/">test_post</a>
          </li>
        
          <li>
            <a href="/2019/09/17/http/2_http_sementics/">http_1.0_sementics</a>
          </li>
        
          <li>
            <a href="/2019/09/09/project/travel_note/">travel_note 서비스 고찰</a>
          </li>
        
          <li>
            <a href="/2019/09/06/http/1_http_1.0_basic_four_feature/">http/1.0의 신택스: 기본이 되는 네가지 요소</a>
          </li>
        
          <li>
            <a href="/2019/09/05/python/post/async_coroutine_5/">비동기 코루틴 번역-5-End</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 junehan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>